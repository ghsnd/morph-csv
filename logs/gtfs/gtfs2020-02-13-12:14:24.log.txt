
QUERY: 1
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>

SELECT * WHERE {
	?shape a gtfs:Shape .
	?shape geo:lat ?shape_pt_lat .
	?shape geo:long ?shape_pt_lon .
	?shape gtfs:pointSequence ?shape_pt_sequence .
}
HA FALLADO
invalid input syntax for type numeric: "shape_pt_lat"
CONTEXT:  COPY shapes, line 58542, column shape_pt_lat: "shape_pt_lat"

----------------------------------------------------
QUERY: 2
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>

SELECT * WHERE {
	?stop a gtfs:Stop . 
	OPTIONAL { ?stop dct:description ?stopDescription . }
	OPTIONAL { ?stop gtfs:wheelchairAccessible ?wheelchairAccesible }
	?stop geo:lat ?stopLat . 
	?stop geo:long ?stopLong .
	FILTER (?stopLat > 40.41) .		
}
HA FALLADO
invalid input syntax for type numeric: "stop_lat"
CONTEXT:  COPY stops, line 1264, column stop_lat: "stop_lat"

----------------------------------------------------
QUERY: 3
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX gtfsstop: <http://transport.linkeddata.es/madrid/metro/stops/>

SELECT * WHERE {
	?stop a gtfs:Stop . 
        ?stop gtfs:locationType ?location .
	OPTIONAL { ?stop dct:description ?stopDescription . }

	OPTIONAL { 
		?stop geo:lat ?stopLat . 
		?stop geo:long ?stopLong .
	}
	OPTIONAL {?stop gtfs:wheelchairAccessible ?wheelchairAccessible .  }
	FILTER (?location=<http://transport.linkeddata.es/resource/LocationType/2>)
}
HA FALLADO
invalid input syntax for type numeric: "stop_lat"
CONTEXT:  COPY stops, line 1264, column stop_lat: "stop_lat"

----------------------------------------------------
QUERY: 4
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>

SELECT * WHERE {
	?route a gtfs:Route .
	OPTIONAL { ?route gtfs:shortName ?routeShortName . }
	OPTIONAL { ?route gtfs:longName ?routeLongName . } 
	OPTIONAL { ?route dct:description ?routeDescription . } 
	?route gtfs:agency ?agency .

	?agency a gtfs:Agency .
	?agency foaf:page ?agencyPage .
	?agency foaf:name ?agencyName .
	OPTIONAL { ?agency foaf:phone ?agencyPhone . }
}
csvColumns:
{"routes": {"source": "ROUTES.csv", "columns": ["route_long_name", "route_desc", "route_short_name", "route_id", "agency_id"]}, "agency": {"source": "AGENCY.csv", "columns": ["agency_name", "agency_url", "agency_id", "agency_phone"]}}
CSV Format:
{"tmp/csv/AGENCY.csv": ""agency_id","agency_name","agency_url","agency_phone"\n"agency_id","agency_name","agency_url","agency_phone"\n", "tmp/csv/ROUTES.csv": ""route_id","agency_id","route_short_name","route_long_name","route_desc"\n"4__10___","CRTM","10","Hospital del Norte-Puerta del Sur",""\n"}
SQL Schema:
DROP TABLE IF EXISTS "agency" CASCADE;CREATE TABLE agency(agency_id VARCHAR,agency_name VARCHAR,agency_url VARCHAR,agency_phone VARCHAR,PRIMARY KEY (agency_id));DROP TABLE IF EXISTS "routes" CASCADE;CREATE TABLE routes(route_id VARCHAR,agency_id VARCHAR,route_short_name VARCHAR,route_long_name VARCHAR,route_desc VARCHAR,PRIMARY KEY (route_id));
----------------------------------------------------
QUERY: 5
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT * WHERE {
	?service a gtfs:Service .

	?service gtfs:serviceRule ?serviceRule .
        
	?serviceRule a gtfs:CalendarDateRule .
	?serviceRule dct:date ?date .
	?serviceRule gtfs:dateAddition "true"^^xsd:boolean .
	FILTER(?date > "2016-06-01"^^xsd:date)
}
csvColumns:
{"calendar_date_rules": {"source": "CALENDAR_DATES.csv", "columns": ["service_id", "exception_type", "date"]}, "services1": {"source": "CALENDAR.csv", "columns": ["service_id"]}, "services2": {"source": "CALENDAR_DATES.csv", "columns": ["service_id"]}, "calendar_rules": {"source": "CALENDAR.csv", "columns": ["service_id"]}}
CSV Format:
{"tmp/csv/CALENDAR.csv": ""service_id"\n"4_I12"\n", "tmp/csv/CALENDAR_DATES.csv": ""service_id"\n"4_I12"\n"}
SQL Schema:
DROP TABLE IF EXISTS "calendar" CASCADE;CREATE TABLE calendar(service_id VARCHAR,PRIMARY KEY (service_id));DROP TABLE IF EXISTS "calendar_dates" CASCADE;CREATE TABLE calendar_dates(service_id VARCHAR,PRIMARY KEY (service_id));
----------------------------------------------------
QUERY: 6
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX gtfsagency: <http://transport.linkeddata.es/madrid/agency/>

SELECT (count(?route) as ?nRoutes) WHERE {
	?route a gtfs:Route .
	?route gtfs:agency ?agency .
	FILTER (?agency=gtfsagency:CRTM)
}
csvColumns:
{"routes": {"source": "ROUTES.csv", "columns": ["route_id", "agency_id"]}, "agency": {"source": "AGENCY.csv", "columns": ["agency_id"]}}
CSV Format:
{"tmp/csv/ROUTES.csv": ""route_id","agency_id"\n"4__10___","CRTM"\n", "tmp/csv/AGENCY.csv": ""agency_id"\n"agency_id"\n"}
SQL Schema:
DROP TABLE IF EXISTS "agency" CASCADE;CREATE TABLE agency(agency_id VARCHAR,PRIMARY KEY (agency_id));DROP TABLE IF EXISTS "routes" CASCADE;CREATE TABLE routes(route_id VARCHAR,agency_id VARCHAR,PRIMARY KEY (route_id));
----------------------------------------------------
QUERY: 7
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX gtfsroute: <http://transport.linkeddata.es/madrid/metro/routes/>
PREFIX gtfsaccessible: <http://transport.linkeddata.es/resource/WheelchairBoardingStatus/>

SELECT DISTINCT ?routeShortName ?routeDescription ?tripShortName ?stopDescription ?stopLat ?stopLong   WHERE {
	?route a gtfs:Route .
	OPTIONAL { ?route gtfs:shortName ?routeShortName . }
	OPTIONAL { ?route dct:description ?routeDescription . }

	?trip a gtfs:Trip .
	OPTIONAL { ?trip gtfs:shortName ?tripShortName . }
	?trip gtfs:service ?service .
	?trip gtfs:route ?route .

	?stopTime a gtfs:StopTime . 
	?stopTime gtfs:trip ?trip . 
	?stopTime gtfs:stop ?stop . 

	?stop a gtfs:Stop . 
	OPTIONAL { ?stop dct:description ?stopDescription . }
	OPTIONAL {
		?stop geo:lat ?stopLat . 
		?stop geo:long ?stopLong . 
	}
	?stop gtfs:wheelchairAccessible gtfsaccessible:1 .
	FILTER (?route=gtfsroute:4__1___)
}HA FALLADO
invalid input syntax for type numeric: "stop_lat"
CONTEXT:  COPY stops, line 1264, column stop_lat: "stop_lat"

----------------------------------------------------
QUERY: 8
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX gtfsstop: <http://transport.linkeddata.es/madrid/metro/stops/>

SELECT * WHERE {
	?route a gtfs:Route .
	OPTIONAL { ?route gtfs:shortName ?routeShortName . }
	OPTIONAL { ?route dct:description ?routeDescription . }

	?trip a gtfs:Trip .
	OPTIONAL { ?trip gtfs:shortName ?tripShortName . }
	?trip gtfs:service ?service .
	?trip gtfs:route ?route .

	?stopTime a gtfs:StopTime . 
	?stopTime gtfs:trip ?trip . 
	?stopTime gtfs:stop ?stop . 

	?stop a gtfs:Stop . 
	OPTIONAL {?stop dct:description ?stopDescription . }

	?service a gtfs:Service .
	?service gtfs:serviceRule ?serviceRule .
}

csvColumns:
{"stoptimes": {"columns": ["trip_id", "arrival_time", "stop_id"], "source": "STOP_TIMES.csv"}, "routes": {"columns": ["route_short_name", "route_id", "route_desc"], "source": "ROUTES.csv"}, "stops": {"columns": ["stop_desc", "stop_id"], "source": "STOPS.csv"}, "trips": {"columns": ["trip_id", "route_id", "trip_short_name", "service_id"], "source": "TRIPS.csv"}, "services1": {"columns": ["service_id"], "source": "CALENDAR.csv"}, "calendar_date_rules": {"columns": ["service_id"], "source": "CALENDAR_DATES.csv"}, "services2": {"columns": ["service_id"], "source": "CALENDAR_DATES.csv"}, "calendar_rules": {"columns": ["service_id"], "source": "CALENDAR.csv"}}
CSV Format:
{"tmp/csv/CALENDAR.csv": ""service_id"\n"4_I12"\n", "tmp/csv/STOPS.csv": ""stop_id","stop_desc"\n"acc_4_100_271","Avda de los Poblados 41"\n", "tmp/csv/ROUTES.csv": ""route_id","route_short_name","route_desc"\n"4__10___","10",""\n", "tmp/csv/STOP_TIMES.csv": ""trip_id","arrival_time","stop_id"\n"4_I12-001_2016I12_1_1_4__1___","00:00:00","par_4_263"\n", "tmp/csv/CALENDAR_DATES.csv": ""service_id"\n"4_I12"\n", "tmp/csv/TRIPS.csv": ""route_id","service_id","trip_id","trip_short_name"\n"4__10___","4_I12","4_I12-101_2016I12_1_1_4__10_A__","Hospital del Norte - Puerta del Sur"\n"}
SQL Schema:
DROP TABLE IF EXISTS "calendar" CASCADE;CREATE TABLE calendar(service_id VARCHAR,PRIMARY KEY (service_id));DROP TABLE IF EXISTS "calendar_dates" CASCADE;CREATE TABLE calendar_dates(service_id VARCHAR,PRIMARY KEY (service_id));DROP TABLE IF EXISTS "routes" CASCADE;CREATE TABLE routes(route_id VARCHAR,route_short_name VARCHAR,route_desc VARCHAR,PRIMARY KEY (route_id));DROP TABLE IF EXISTS "stop_times" CASCADE;CREATE TABLE stop_times(trip_id VARCHAR,arrival_time VARCHAR,stop_id VARCHAR,PRIMARY KEY (trip_id,arrival_time,stop_id));DROP TABLE IF EXISTS "stops" CASCADE;CREATE TABLE stops(stop_id VARCHAR,stop_desc VARCHAR,PRIMARY KEY (stop_id));DROP TABLE IF EXISTS "trips" CASCADE;CREATE TABLE trips(route_id VARCHAR,service_id VARCHAR,trip_id VARCHAR,trip_short_name VARCHAR,PRIMARY KEY (trip_id));
----------------------------------------------------
QUERY: 9
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX gtfsstop: <http://transport.linkeddata.es/madrid/metro/stops/>

SELECT * WHERE {
	?trip a gtfs:Trip .
	OPTIONAL { ?trip gtfs:shortName ?tripShortName . }
	?trip gtfs:service ?service .
	?trip gtfs:route ?route .
	?trip gtfs:shape ?shape .

	?shape a gtfs:Shape .
	?shape geo:lat ?lat .
	FILTER (?lat > 40.40)
}
HA FALLADO
invalid input syntax for type numeric: "shape_pt_lat"
CONTEXT:  COPY shapes, line 58542, column shape_pt_lat: "shape_pt_lat"

----------------------------------------------------
QUERY: 10
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX gtfsroute: <http://transport.linkeddata.es/madrid/metro/routes/>

SELECT (count(distinct ?trip) as ?count)  WHERE {
	?trip a gtfs:Trip .

	?stopTime a gtfs:StopTime . 
	?stopTime gtfs:trip ?trip . 
	?stopTime gtfs:departureTime ?departureTime .

	FILTER (?departureTime >= "00:30:00"^^xsd:duration) .
}
csvColumns:
{"stoptimes": {"source": "STOP_TIMES.csv", "columns": ["trip_id", "arrival_time", "departure_time", "stop_id"]}, "trips": {"source": "TRIPS.csv", "columns": ["trip_id"]}}
CSV Format:
{"tmp/csv/STOP_TIMES.csv": ""trip_id","arrival_time","departure_time","stop_id"\n"4_I12-001_2016I12_1_1_4__1___","00:00:00","00:00:00","par_4_263"\n", "tmp/csv/TRIPS.csv": ""trip_id"\n"4_I12-001_2016I12_1_1_4__1___"\n"}
SQL Schema:
DROP TABLE IF EXISTS "stop_times" CASCADE;CREATE TABLE stop_times(trip_id VARCHAR,arrival_time VARCHAR,departure_time VARCHAR,stop_id VARCHAR,PRIMARY KEY (trip_id,arrival_time,stop_id));DROP TABLE IF EXISTS "trips" CASCADE;CREATE TABLE trips(trip_id VARCHAR,PRIMARY KEY (trip_id));
----------------------------------------------------
QUERY: 11
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX gtfsroute: <http://transport.linkeddata.es/madrid/metro/routes/>

SELECT * WHERE {
        ?service a gtfs:Service .
        ?service gtfs:serviceRule ?calendarRule .
		
		?trip gtfs:service ?service .
		
		?calendarRule a gtfs:CalendarRule .
        ?calendarRule schema:startDate ?startDate .
        ?calendarRule schema:endDate ?endDate .
        FILTER (?startDate < "2017-07-02"^^xsd:date) .
        FILTER (?endDate > "2017-07-02"^^xsd:date) .
		
        FILTER NOT EXISTS {
		    ?service gtfs:serviceRule ?calendarDateRule . 
            ?calendarDateRule a gtfs:CalendarDateRule .
	        ?calendarDateRule dct:date "2017-07-02"^^xsd:date .
	        ?calendarDateRule gtfs:dateAddition "false"^^xsd:boolean 
        }
}
csvColumns:
{"services2": {"source": "CALENDAR_DATES.csv", "columns": ["service_id"]}, "trips": {"source": "TRIPS.csv", "columns": ["trip_id", "service_id"]}, "calendar_date_rules": {"source": "CALENDAR_DATES.csv", "columns": ["service_id"]}, "calendar_rules": {"source": "CALENDAR.csv", "columns": ["start_date", "end_date", "service_id"]}, "services1": {"source": "CALENDAR.csv", "columns": ["service_id"]}}
CSV Format:
{"tmp/csv/CALENDAR.csv": ""service_id"\n"4_I12"\n", "tmp/csv/CALENDAR_DATES.csv": ""service_id"\n"4_I12"\n", "tmp/csv/TRIPS.csv": ""service_id","trip_id"\n"4_I12","4_I12-001_2016I12_1_1_4__1___"\n"}
SQL Schema:
DROP TABLE IF EXISTS "calendar" CASCADE;CREATE TABLE calendar(service_id VARCHAR,PRIMARY KEY (service_id));DROP TABLE IF EXISTS "calendar_dates" CASCADE;CREATE TABLE calendar_dates(service_id VARCHAR,PRIMARY KEY (service_id));DROP TABLE IF EXISTS "trips" CASCADE;CREATE TABLE trips(service_id VARCHAR,trip_id VARCHAR,PRIMARY KEY (trip_id));
----------------------------------------------------
QUERY: 12
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX gtfsaccessible: <http://transport.linkeddata.es/resource/WheelchairBoardingStatus/>
PREFIX gtfslocation: <http://transport.linkeddata.es/resource/LocationType/>

SELECT ?longName (count(?name) as ?count)
WHERE { 	
	?route a gtfs:Route .
	?route gtfs:longName ?longName .
 
	?trip a gtfs:Trip .
	?trip gtfs:route ?route .
 
	?stopTime a gtfs:StopTime .
	?stopTime gtfs:trip ?trip .
	?stopTime gtfs:stop ?stop .
 
 	?stop a gtfs:Stop .
 	?stop foaf:name  ?name .
 	?stop gtfs:wheelchairAccessible gtfsaccessible:1 .	
}
GROUP BY ?longName
HA FALLADO
invalid input syntax for integer: "wheelchair_boarding"
CONTEXT:  COPY stops, line 1264, column wheelchair_boarding: "wheelchair_boarding"

----------------------------------------------------
QUERY: 13
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX gtfslocation: <http://transport.linkeddata.es/resource/LocationType/>

SELECT  * WHERE {     
    ?stop a gtfs:Stop .
    ?stop gtfs:parentStation ?parStation .
    OPTIONAL {?stop foaf:name ?accName} .
    ?stop gtfs:locationType gtfslocation:2 .
    ?parStation a gtfs:Stop .
    ?parStation foaf:name ?name      
}

csvColumns:
{"stops": {"columns": ["stop_id", "stop_name"], "source": "STOPS.csv"}}
CSV Format:
{"tmp/csv/STOPS.csv": ""stop_id","stop_name"\n"acc_4_100_271","Avda. Poblados"\n"}
SQL Schema:
DROP TABLE IF EXISTS "stops" CASCADE;CREATE TABLE stops(stop_id VARCHAR,stop_name VARCHAR);
----------------------------------------------------
QUERY: 14
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX gtfsservice: <http://transport.linkeddata.es/madrid/metro/services/>

SELECT * WHERE {
    ?stopTime a gtfs:StopTime .
    ?stopTime gtfs:trip ?trip .
    ?stopTime gtfs:stop ?stop .
    ?stopTime gtfs:stopSequence ?sequence .

    ?stop a gtfs:Stop .

    ?trip a gtfs:Trip .
    ?trip gtfs:route ?route .

    OPTIONAL {?stop foaf:name ?stopName} 
}
 ORDER BY ?sequenceHA FALLADO
invalid input syntax for integer: "stop_sequence"
CONTEXT:  COPY stop_times, line 2366, column stop_sequence: "stop_sequence"

----------------------------------------------------
QUERY: 15
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>

SELECT * WHERE { 
	?stop a gtfs:Stop .
	?stop ?p ?str .
	FILTER regex (?str, 'Doctor')
}
csvColumns:
{"stops": {"source": "STOPS.csv", "columns": ["stop_id"]}}
CSV Format:
{"tmp/csv/STOPS.csv": ""stop_id"\n"acc_4_100_271"\n"}
SQL Schema:
DROP TABLE IF EXISTS "stops" CASCADE;CREATE TABLE stops(stop_id VARCHAR);
----------------------------------------------------
QUERY: 16

PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT * WHERE {
	?trip a gtfs:Trip .
	?trip gtfs:service ?service .
	?trip gtfs:route ?route . 

	?service a gtfs:Service .
	?service gtfs:serviceRule ?serviceRule .

	?serviceRule a gtfs:CalendarDateRule .
	?serviceRule  dct:date ?servDate .
	?serviceRule  gtfs:dateAddition "true"^^xsd:boolean .
	FILTER (?servDate >= '2017-03-01'^^xsd:date) .
	FILTER (?servDate <= '2017-03-31'^^xsd:date) .
}
csvColumns:
{"trips": {"source": "TRIPS.csv", "columns": ["trip_id", "service_id", "route_id"]}, "calendar_date_rules": {"source": "CALENDAR_DATES.csv", "columns": ["exception_type", "date", "service_id"]}, "routes": {"source": "ROUTES.csv", "columns": ["route_id"]}, "services1": {"source": "CALENDAR.csv", "columns": ["service_id"]}, "services2": {"source": "CALENDAR_DATES.csv", "columns": ["service_id"]}, "calendar_rules": {"source": "CALENDAR.csv", "columns": ["service_id"]}}
CSV Format:
{"tmp/csv/CALENDAR.csv": ""service_id"\n"4_I12"\n", "tmp/csv/TRIPS.csv": ""route_id","service_id","trip_id"\n"4__10___","4_I12","4_I12-101_2016I12_1_1_4__10_A__"\n", "tmp/csv/CALENDAR_DATES.csv": ""service_id"\n"4_I12"\n", "tmp/csv/ROUTES.csv": ""route_id"\n"4__1___"\n"}
SQL Schema:
DROP TABLE IF EXISTS "calendar" CASCADE;CREATE TABLE calendar(service_id VARCHAR,PRIMARY KEY (service_id));DROP TABLE IF EXISTS "calendar_dates" CASCADE;CREATE TABLE calendar_dates(service_id VARCHAR,PRIMARY KEY (service_id));DROP TABLE IF EXISTS "routes" CASCADE;CREATE TABLE routes(route_id VARCHAR,PRIMARY KEY (route_id));DROP TABLE IF EXISTS "trips" CASCADE;CREATE TABLE trips(route_id VARCHAR,service_id VARCHAR,trip_id VARCHAR,PRIMARY KEY (trip_id));
----------------------------------------------------
QUERY: 17
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT ?routeName ?routeType ?trip ?startTime ?endTime WHERE {
    ?trip a gtfs:Trip .
    ?trip gtfs:route ?route .

    ?frequency a gtfs:Frequency .
    ?frequency gtfs:startTime ?startTime .
    ?frequency gtfs:endTime ?endTime .
    ?frequency gtfs:trip ?trip .

    ?route a gtfs:Route .
    ?route gtfs:shortName ?routeName .
    ?route gtfs:routeType ?routeType .

}
 


HA FALLADO
invalid input syntax for integer: "route_type"
CONTEXT:  COPY routes, line 15, column route_type: "route_type"

----------------------------------------------------
QUERY: 18
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX gtfs: <http://vocab.gtfs.org/terms#>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX schema: <http://schema.org/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT * WHERE {
	?service a gtfs:Service .
	?service gtfs:serviceRule ?serviceRule .

	?serviceRule a gtfs:CalendarRule .
	?serviceRule gtfs:sunday "true"^^xsd:boolean . 
        
	?trip gtfs:service ?service .
	?trip gtfs:route ?route  .
  
	{  ?route gtfs:longName ?longName} 
	UNION
	{  ?route gtfs:shortName ?shortName} 
	.                                             
}
HA FALLADO
invalid input syntax for type boolean: "sunday"
CONTEXT:  COPY calendar, line 7, column sunday: "sunday"

----------------------------------------------------
